# 这里记录一些和服务器相关的内容

## 1、服务器状态码

**1xx**：信息提示

**2xx**：成功；200

**3xx**：重定向；304：NotModified 表示资源未被修改可以继续使用，用在协商缓存中；301：永久重定向，比如码云的服务地址由 http://git.oschina.net ==>  https://gitee.com/ ；302：临时重定向，302重定向，可能情况：在接口调用中，302表明用户未登录，需要登录，因此会出现重定向

**4xx**：客户端错误；400：Bad Request ：请求出现语法错误，如post请求中，`content-type:application/json`而json字符串拼接不合法；401：Unauthorized ：资源未授权；403：Forbidden ：禁止访问；404：Not Found 无法找到资源；405：Method Not Allowed ：方法不被允许，比如实际请求为post而应为get；

**5xx**：服务器错误；500：服务器出错；

所有的服务器状态码，都可以手动修改；

状态码处于http信息的头部header

客户端服务端通过状态码标示响应的状态，乱改状态码会出现意想不到的结果；

## 2、缓存控制

缓存分为：强制缓存和协商缓存；
**强制缓存**：资源的缓存控制由约定好的时间来决定，在时间范围内，返回状态码200，并且使用缓存；涉及到的请求头参数有
* `Expire:Thu, 16 Aug 2018 03:01:15 GMT;`: 指定到期的时间，到期时间前使用缓存；缺点：使用的时间判断为客户端时间，若客户端时间靠后，则会一直使用缓存；http1.0
* ` Cache-Control:public,max-age=1000`：消除了上述问题，设定多长时间之后；http1.1

**协商缓存**：客户端和服务端协商决定，若使用缓存则服务端返回状态码304，向客户端表明资源未被修改，可以继续使用；使用的参数有：`Last-Modified If-Modified-since ETag If-none-match`

* `Last-Modified If-Modified-since` 首先服务器告诉客户端，请求的资源文件上次修改时间为xxx，（服务起从从文件属性中获取该修改时间），而后客户端请求时会附带`If-Modified-Since`参数，参数值为请求的第一次返回值。服务端根据`If-Modified-Since`参数值与当前文件的修改时间进行比较。若相同表明客户端文件和服务端文件一致。服务端返回304；否则返回200，并返回资源；
* `ETag If-none-match` 首先服务起返回请求资源文件的`ETag`（文件资源唯一标示，文件发生变化，值会更新），而后客户端请求时会附带`If-none-match`参数，参数值为请求的第一次服务器返回值。服务器根据`If-none-match`参数值与当前文件的标示进行比较，若相同表明客户端文件和服务端文件一致。服务端返回304；否则返回200，并返回资源；

标示符的有限级：

>  Pragma > Cache-Control > Expires > ETag > Last-Modified 